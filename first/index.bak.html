<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title></title>
	<style>
		canvas {
			border: 1px solid #eee;
		}
	</style>
</head>
<body>
<!-- <button id="edit-photo">编辑图片</button> -->

<div id="data">这是一段文本22</div>

<button id="open">编辑文本</button>
<button id="send">发送消息</button>

<!--<iframe src="http://a.yunser.com" id="ifr">-->
        <!--</iframe>-->
        <!--<script>-->
            <!--window.onload = function(){-->
                <!--var iframe = document.getElementById('ifr');-->
                <!--var targetOrigin = 'http://a.yunser.com'; // 若写成'http://b.com/c/proxy.html'效果一样-->
                <!--// 若写成'http://c.com'就不会执行postMessage了-->
                <!--iframe.contentWindow.postMessage('data to send',targetOrigin);-->
                <!--console.log('发送成功')-->
            <!--}-->
        <!--</script>-->

<script src="webintents.js"></script>
<!--<script src="yunser-web-indents.js"></script>-->
<script>
//    let intent = new ysIntent({
//        action: 'http://webintents.org/edit',
////        type: 'image/jpeg',
//        type: 'text/plain',
//        data: '121212'
//    })
//
//    document.getElementById('open').addEventListener("click", function() {
//        ysIntent.startActivity(intent, data => {
//            document.getElementById('data').innerText = data
//        })
//    }, false);
//
//     document.getElementById('send').addEventListener("click", function() {
//         console.log('send message2')
//         win.postMessage('data to send', 'http://a.yunser.com')
//     }, false);

 document.getElementById('open').addEventListener("click", function() {
   var intent = new Intent({"action":"http://a.yunser.com/edit",
                            "type":"text/plain",
                            "data": '121212'});
   navigator.startActivity(intent, imageEdited);
 }, false);

 function imageEdited(data) {
     document.getElementById('data').innerText = data
//   document.getElementById('image').src = data;
 }

</script>
</body>
</html>
